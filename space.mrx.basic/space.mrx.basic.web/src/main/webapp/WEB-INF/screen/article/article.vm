<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>欢迎登录</title>
    <link href="../../static/css/combined.css" rel="stylesheet">
    <link href="../../static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/buttons.css">
    <style media="screen">
      .input-group input{
        margin-bottom: 0px;
      }
      .input-group input:hover{
        width:300px;
      }
      #loginSubmit :visited{
        color: green;
        background: green;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <ul class="nav nav-pills">
                    <li class="active">
                        <a href="#">首页</a>
                    </li>
                    <li>
                        <a href="#">资料</a>
                    </li>
                    <li class="">
                        <a href="#">信息</a>
                    </li>
            <li class="">
              <a href="#modal-container-661042" data-toggle="modal">登录</a>
            </li>
            <li class="dropdown pull-right">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">下拉</a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">操作</a>
                            </li>
                            <li>
                                <a href="#">设置栏目</a>
                            </li>
                            <li>
                                <a href="#">更多设置</a>
                            </li>
                            <li class="divider">
                            </li>
                            <li>
                                <a href="#">分割线</a>
                            </li>
                        </ul>
                    </li>
            <li style="
              padding-top: 2px;
              float: right;
            ">
              <form class="form-search" method="post" action="http://localhost:8085/welcome/adfa.py" onsubmit="javascript:mySearch();" >
                <label for="searchContent">小姐姐 我想:</label>
                <input id="searchContent" name="searchContent" class="input-medium search-query" type="text" placeholder="你要搜什么呀？骚年.."/>
                <input type="submit" value="Go" class="button button-pill">
              </form>
            </li>
                </ul>
                <div id="modal-container-661042" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <img style="height:26px!important;" src="../../static/img/login_header.png" />
                    </div>
                    <div class="modal-body">
                      <form class="form-horizontal" id="userModel">
                        <div class="control-group">
                             <label class="control-label">
                               <img style="height:20px!important;" src="../../static/img/username.png" />
                             </label>
                            <div class="controls">
                                <input type="text" name="username" required oninput="myValidate(this)"/>
                            </div>
                        </div>
                        <div class="control-group">
                             <label class="control-label">
                               <img style="height:20px!important;" src="../../static/img/password.png" />
                             </label>
                            <div class="controls">
                                <input type="password" name="password" required/>
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                 <label class="checkbox"><input type="checkbox" name="remember" checked/>记住密码</label>
                                 <!-- <button type="submit" class="btn">登陆</button> -->
                                 <a href="javascript:void(0)" id="loginSubmit" role="button" onclick="login()" class="btn" data-toggle="modal">登录</a>
                                 <button class="btn" data-dismiss="modal" aria-hidden="true" style="margin-left: 107px;">取消</button>
                            </div>
                        </div>
                    </form>
                    </div>
                </div>
                <div class="page-header">
                    <h1>
                        页标题范例 <small>此处编写页标题</small>
                    </h1>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
      // var search  = function(){
      //   alert("adfad");
      // };
      function mySearch(){
        var content = encodeURI($('input[name="searchContent"]').val());

        $(".form-search")[0].action = "http://localhost:8085/welcome/" + encodeURI(content) + ".html";
      }
      function myValidate(data){
        console.log(data.value);
      }
      function login(){
        // jQuery.post("/user/login.do",{"username":"lisi","password":"123"},function(data){
        //    console.log(data);
        // },"json")
        // jQuery("#userModel").valid();
        var param = jQuery("#userModel").serialize();
        console.log(param);
        // jQuery("#userModel").submit();
        param = _format_serialize(param);
        jQuery.ajax({
          type: 'POST',
          url: '/user/login.py',
          data: param,
          success: function(data){
              console.log(data);
              if(data && data.success){
                // 成功回调 暂时这样写
                jQuery(jQuery('button[data-dismiss="modal"]')[0]).click();
                return ;
              }
              alert("登录失败，请重试！！");
              jQuery("#“loginResultTip”").show();
          },
          dataType: 'json'
        });
      }
    </script>



  </body>
  <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdn.bootcss.com/unveil/1.3.0/jquery.unveil.min.js"></script>
  <script src="https://cdn.bootcss.com/scrollup/2.4.1/jquery.scrollUp.min.js"></script>
  <script src="https://cdn.bootcss.com/toc/0.3.2/toc.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery.matchHeight/0.7.0/jquery.matchHeight-min.js"></script>
  <script src="https://static.bootcss.com/www/assets/js/site.min.js"></script>
  <script src="../../static/js/Utils.js">

  </script>
  <style media="screen">
    .button {
        color: #fbc378;
        background-color: #EEE;
        font-size: 14px;
        line-height: 30px;
        height: 30px;
        padding: 0px 25px; /*控制按钮的宽度*/
    }
  </style>


</html>
